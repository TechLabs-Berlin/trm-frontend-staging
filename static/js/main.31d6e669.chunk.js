(this["webpackJsonptrm-frontend"]=this["webpackJsonptrm-frontend"]||[]).push([[0],{360:function(e,t,n){e.exports=n(605)},365:function(e,t,n){},605:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),o=n.n(c),i=(n(365),n(283)),l=n(284),s=n(332),m=n(334),u=n(694),E=n(693),d=n(211),h=n.n(d),p=n(285),f=n(331),g=n(290),_=n.n(g),P="https://trm-staging-hasura-xwaitoan6a-ew.a.run.app/v1/graphql",w="https://europe-west3-techlabs-trm-test.cloudfunctions.net/trm-auth-staging",R={clientId:"982186032389-28u4o2ui0up26vtp6ajp4ce7kqd69p7v.apps.googleusercontent.com",hostedDomain:"techlabs.org"},k=null,b=function(){return null!==localStorage.getItem("token")},v=function(){var e=localStorage.getItem("token"),t=new f.a({headers:{Authorization:"Bearer ".concat(e)},uri:P});return _()({client:t})},A=Object(p.a)(h.a.mark((function e(){var t=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==k||!b()){e.next=4;break}return e.next=3,v();case 3:k=e.sent;case 4:if(null===k){e.next=6;break}return e.abrupt("return",k.apply(void 0,t));case 6:return e.abrupt("return",Promise.reject("not logged in"));case 7:case"end":return e.stop()}}),e)}))),S={login:function(e){var t=e.code,n=new Request(w,{method:"POST",body:JSON.stringify({code:t}),headers:new Headers({"Content-Type":"application/json"})});return fetch(n).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token;localStorage.setItem("token",t)}))},logout:function(){return localStorage.removeItem("token"),Promise.resolve()},checkAuth:function(e){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},checkError:function(e){return console.log("checkError: ".concat(e)),Promise.resolve()},getPermissions:function(){console.log("getPermissions");var e=localStorage.getItem("permissions");return e?Promise.resolve(e):Promise.reject()}},y=n(150),I=n(666),L=n(174),O=n(667),j=n(291),N=n(330),D=Object(N.a)({palette:{type:"light"}}),T=function(){var e=Object(y.a)(),t=Object(I.a)(),n=function(n){"code"in n?t({code:n.code}):(console.error(n),e("Sign in with Google failed"))};return r.createElement(O.a,{theme:D},r.createElement("div",{className:"google-login-container"},r.createElement(j.GoogleLogin,{clientId:R.clientId,hostedDomain:R.hostedDomain,scope:"profile email https://www.googleapis.com/auth/admin.directory.group.readonly",responseType:"code",onSuccess:n,onFailure:n,cookiePolicy:"single_host_origin"})),r.createElement(L.a,null))},B=n(701),C=n(673),x=n(675),J=n(695),M=n(696),U=n(683),q=n(684),G=n(705),W=n(699),z=n(697),F=n(704),H=function(e){return r.createElement(B.a,e,r.createElement(C.a,{label:"Search",source:"techie_key",alwaysOn:!0}),r.createElement(C.a,{source:"email"}),r.createElement(x.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(x.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(x.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}))},$=function(e){return r.createElement(J.a,Object.assign({},e,{filters:r.createElement(H,null)}),r.createElement(M.a,{rowClick:"edit"},r.createElement(U.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(U.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(U.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}),r.createElement(q.a,{source:"techie_key"}),r.createElement(G.a,{source:"email"})))},K=function(e){return r.createElement(W.a,e,r.createElement(z.a,null,r.createElement(x.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(x.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(x.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}),r.createElement(C.a,{source:"email"}),r.createElement(C.a,{source:"techie_key"})))},Q=function(e){return r.createElement(F.a,e,r.createElement(z.a,null,r.createElement(x.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(x.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(x.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}),r.createElement(C.a,{source:"email"}),r.createElement(C.a,{source:"techie_key"})))},V=n(690),X=n(700),Y=n(691),Z=function(e){return r.createElement(B.a,e,r.createElement(C.a,{label:"Search",source:"description",alwaysOn:!0}),r.createElement(C.a,{source:"form_id"}))},ee=function(e){return r.createElement(J.a,Object.assign({},e,{filters:r.createElement(Z,null)}),r.createElement(M.a,{rowClick:"edit"},r.createElement(U.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(q.a,{source:"form_id"}),r.createElement(q.a,{source:"description"}),r.createElement(V.a,{source:"imports_techies"})))},te=function(e){return r.createElement(W.a,e,r.createElement(z.a,null,r.createElement(x.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(C.a,{source:"form_id"}),r.createElement(C.a,{source:"description"}),r.createElement(X.a,{source:"imports_techies"}),r.createElement(Y.a,{source:"webhook_installed_at",showTime:!0})))},ne=function(e){return r.createElement(F.a,e,r.createElement(z.a,null,r.createElement(x.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(C.a,{source:"form_id"}),r.createElement(C.a,{source:"description"}),r.createElement(X.a,{source:"imports_techies"}),r.createElement(Y.a,{source:"webhook_installed_at"})))},re=n(703),ae=n(692),ce=function(e){return r.createElement(B.a,e,r.createElement(C.a,{label:"Search by form_id",source:"form_id",alwaysOn:!0}),r.createElement(C.a,{source:"typeform_response_token"}))},oe=function(e){return r.createElement(J.a,Object.assign({},e,{filters:r.createElement(ce,null)}),r.createElement(M.a,{rowClick:"show"},r.createElement(q.a,{source:"answers"}),r.createElement(Y.a,{source:"created_at",showTime:!0}),r.createElement(q.a,{source:"form_id"}),r.createElement(q.a,{source:"techie_id"}),r.createElement(q.a,{source:"typeform_response_token"})))},ie=function(e){return r.createElement(re.a,e,r.createElement(ae.a,null,r.createElement(q.a,{source:"form_id"}),r.createElement(q.a,{source:"techie_id"}),r.createElement(q.a,{source:"typeform_response_token"}),r.createElement(q.a,{source:"typeform_event"}),r.createElement(q.a,{source:"answers"}),r.createElement(Y.a,{source:"created_at",showTime:!0})))},le=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return a.a.createElement(u.a,{dataProvider:A,authProvider:S,loginPage:T,theme:D},a.a.createElement(E.a,{name:"techies",list:$,edit:K,create:Q}),a.a.createElement(E.a,{name:"forms",list:ee,edit:te,create:ne}),a.a.createElement(E.a,{name:"form_submissions",list:oe,show:ie}))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[360,1,2]]]);
//# sourceMappingURL=main.31d6e669.chunk.js.map