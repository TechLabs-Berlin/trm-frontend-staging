(this["webpackJsonptrm-frontend"]=this["webpackJsonptrm-frontend"]||[]).push([[0],{348:function(e,t,n){e.exports=n(593)},353:function(e,t,n){},593:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),i=(n(353),n(276)),s=n(277),l=n(323),m=n(325),u=n(673),d=n(672),E=n(202),h=n.n(E),p=n(278),g=n(322),P=n(283),f=n.n(P),R="https://trm-staging-hasura-xwaitoan6a-ew.a.run.app/v1/graphql",A="https://europe-west3-techlabs-trm-test.cloudfunctions.net/trm-auth",v={clientId:"737065308340-9168dm0hd3e2m4r3msh0ceukd2o9ii15.apps.googleusercontent.com",hostedDomain:"seidel.me"},w=null,I=function(){return null!==localStorage.getItem("token")},L=function(){var e=localStorage.getItem("token"),t=new g.a({headers:{Authorization:"Bearer ".concat(e)},uri:R});return f()({client:t})},k=Object(p.a)(h.a.mark((function e(){var t=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==w||!I()){e.next=4;break}return e.next=3,L();case 3:w=e.sent;case 4:if(null===w){e.next=6;break}return e.abrupt("return",w.apply(void 0,t));case 6:return e.abrupt("return",Promise.reject("not logged in"));case 7:case"end":return e.stop()}}),e)}))),O={login:function(e){var t=e.code,n=new Request(A,{method:"POST",body:JSON.stringify({code:t}),headers:new Headers({"Content-Type":"application/json"})});return fetch(n).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token;localStorage.setItem("token",t)}))},logout:function(){return localStorage.removeItem("token"),Promise.resolve()},checkAuth:function(e){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},checkError:function(e){return console.log("checkError: ".concat(e)),Promise.resolve()},getPermissions:function(){console.log("getPermissions");var e=localStorage.getItem("permissions");return e?Promise.resolve(e):Promise.reject()}},S=n(141),D=n(649),b=n(164),j=n(650),N=n(284),T=n(321),C=Object(T.a)({palette:{type:"light"}}),y=function(){var e=Object(S.a)(),t=Object(D.a)(),n=function(n){"code"in n?t({code:n.code}):(console.error(n),e("Sign in with Google failed"))};return r.createElement(j.a,{theme:C},r.createElement("div",{className:"google-login-container"},r.createElement(N.GoogleLogin,{clientId:v.clientId,hostedDomain:v.hostedDomain,scope:"profile email https://www.googleapis.com/auth/admin.directory.group.readonly",responseType:"code",onSuccess:n,onFailure:n,cookiePolicy:"single_host_origin"})),r.createElement(b.a,null))},B=n(679),_=n(683),x=n(659),J=n(674),M=n(675),U=n(684),q=n(668),G=n(677),W=n(676),z=n(682),F=function(e){return r.createElement(B.a,e,r.createElement(_.a,{label:"Search",source:"email",alwaysOn:!0}),r.createElement(x.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(x.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"}]}),r.createElement(x.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}))},H=function(e){return r.createElement(J.a,Object.assign({},e,{filters:r.createElement(F,null)}),r.createElement(M.a,{rowClick:"edit"},r.createElement(U.a,{source:"email"}),r.createElement(q.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(q.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"}]}),r.createElement(q.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]})))},$=function(e){return r.createElement(G.a,e,r.createElement(W.a,null,r.createElement(x.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(x.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"}]}),r.createElement(x.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}),r.createElement(_.a,{source:"email"})))},K=function(e){return r.createElement(z.a,e,r.createElement(W.a,null,r.createElement(x.a,{source:"location",choices:[{id:"BERLIN",name:"Berlin"}]}),r.createElement(x.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"}]}),r.createElement(x.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}),r.createElement(_.a,{source:"email"})))},Q=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(u.a,{dataProvider:k,authProvider:O,loginPage:y,theme:C},a.a.createElement(d.a,{name:"techies",list:H,edit:$,create:K}))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[348,1,2]]]);
//# sourceMappingURL=main.ec2b8164.chunk.js.map