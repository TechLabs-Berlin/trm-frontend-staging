(this["webpackJsonptrm-frontend"]=this["webpackJsonptrm-frontend"]||[]).push([[0],{509:function(e,t,a){e.exports=a(910)},514:function(e,t,a){},910:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(22),o=a.n(c),i=(a(514),a(418)),l=a(419),s=a(477),m=a(481),u=a(1009),d=a(1008),E=a(473),f=a.n(E),p=a(474),h=a.n(p),_=a(475),b=a.n(_),g=a(308),P=a.n(g),w=a(420),v=a(479),S=a(478),k=a(161),O=a(212),y=a(90),j=a(213),A=a(10),R="https://trm-staging-hasura-xwaitoan6a-ew.a.run.app/v1/graphql",D="https://europe-west3-techlabs-trm-test.cloudfunctions.net/trm-auth-staging",L={clientId:"982186032389-28u4o2ui0up26vtp6ajp4ce7kqd69p7v.apps.googleusercontent.com",hostedDomain:"techlabs.org"},T=null,I=function(){return null!==localStorage.getItem("token")},C=function(){var e=localStorage.getItem("token"),t=new v.a({headers:{Authorization:"Bearer ".concat(e)},uri:R}),a=function(e){var t=Object(y.c)(e);return"form_submissions"===e.name&&(t.push(A.field(A.name("form"),null,null,null,A.selectionSet([A.field(A.name("description"))]))),t.push(A.field(A.name("techie"),null,null,null,A.selectionSet([A.field(A.name("first_name")),A.field(A.name("last_name"))])))),t},r=Object(k.a)(O.a,(function(e){return Object(y.d)(e,a,y.e,y.b,y.a)}),j.a);return Object(S.a)({client:t,buildQuery:r})},N=Object(w.a)(P.a.mark((function e(){var t=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T||!I()){e.next=4;break}return e.next=3,C();case 3:T=e.sent;case 4:if(null===T){e.next=6;break}return e.abrupt("return",T.apply(void 0,t));case 6:return e.abrupt("return",Promise.reject("not logged in"));case 7:case"end":return e.stop()}}),e)}))),F={login:function(e){var t=e.code,a=new Request(D,{method:"POST",body:JSON.stringify({code:t}),headers:new Headers({"Content-Type":"application/json"})});return fetch(a).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token;localStorage.setItem("token",t)}))},logout:function(){return localStorage.removeItem("token"),Promise.resolve()},checkAuth:function(e){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},checkError:function(e){return console.log("checkError: ".concat(e)),Promise.resolve()},getPermissions:function(){var e=localStorage.getItem("permissions");return e?Promise.resolve(e):Promise.reject()}},x=a(54),J=a(214),M=a(215),U=Object(x.a)({resources:{techies:{fields:{first_name:"First Name",last_name:"Last Name",techie_key:"Techie Key"}},forms:{fields:{form_id:"Typeform Form ID",imports_techies:"Imports Techies?"}},form_submissions:{name:"Form Submission |||| Form Submissions",fields:{"form.description":"Form","techie.first_name":"First Name","techie.last_name":"Last Name"}}}},J.a),q=Object(M.a)((function(){return U})),B=a(167),G=a(977),W=a(243),z=a(978),H=a(430),K=a(476),Q=Object(K.a)({palette:{primary:{main:"#fb1d5c"}}}),$=function(){var e=Object(B.a)(),t=Object(G.a)(),a=function(a){"code"in a?t({code:a.code}):(console.error(a),e("Sign in with Google failed"))};return r.createElement(z.a,{theme:Q},r.createElement("div",{className:"google-login-container"},r.createElement(H.GoogleLogin,{clientId:L.clientId,hostedDomain:L.hostedDomain,scope:"profile email https://www.googleapis.com/auth/admin.directory.group.readonly",responseType:"code",onSuccess:a,onFailure:a,cookiePolicy:"single_host_origin"})),r.createElement(W.a,null))},V=a(1017),X=a(985),Y=a(987),Z=a(1010),ee=a(1011),te=a(995),ae=a(996),re=a(240),ne=a(997),ce=a(1013),oe=a(1012),ie=a(1022),le=a(1014),se=a(1021),me=a(1002),ue=function(e){return r.createElement(V.a,e,r.createElement(X.a,{label:"Search",source:"techie_key",alwaysOn:!0}),r.createElement(X.a,{source:"email"}),r.createElement(Y.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(Y.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}))},de=function(e){return r.createElement(Z.a,Object.assign({},e,{filters:r.createElement(ue,null),perPage:25}),r.createElement(ee.a,{rowClick:"edit"},r.createElement(te.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(te.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}),r.createElement(ae.a,{source:"first_name"}),r.createElement(ae.a,{source:"last_name"})))},Ee=function(e){return r.createElement(re.a,e,r.createElement(ne.a,null))},fe=function(e){return r.createElement(ce.a,e,r.createElement(oe.a,{toolbar:r.createElement(Ee,null)},r.createElement(ie.a,{label:"Master Data"},r.createElement(Y.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(Y.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}),r.createElement(X.a,{source:"first_name"}),r.createElement(X.a,{source:"last_name"}),r.createElement(X.a,{source:"email"}),r.createElement(ae.a,{source:"techie_key"})),r.createElement(ie.a,{label:"Form Submissions"},r.createElement(le.a,{label:"Form Submissions by Techie",reference:"form_submissions",target:"techie_id"},r.createElement(ee.a,{rowClick:"show"},r.createElement(ae.a,{label:"Form Description",source:"form.description"}),r.createElement(ae.a,{label:"Submission created at",source:"created_at"}))))))},pe=function(e){return r.createElement(se.a,e,r.createElement(me.a,null,r.createElement(Y.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(Y.a,{source:"state",choices:[{id:"PROSPECT",name:"Prospect"},{id:"APPLICANT",name:"Applicant"},{id:"REJECTED",name:"Rejected"},{id:"LEARNER",name:"Learner"},{id:"DROPPED",name:"Dropped"},{id:"ALUMNI",name:"Alumni"}]}),r.createElement(X.a,{source:"email"}),r.createElement(X.a,{source:"techie_key"})))},he=a(1003),_e=a(1016),be=a(1004),ge=function(e){return r.createElement(V.a,e,r.createElement(X.a,{label:"Search",source:"description",alwaysOn:!0}),r.createElement(X.a,{source:"form_id"}))},Pe=function(e){return r.createElement(Z.a,Object.assign({},e,{filters:r.createElement(ge,null),perPage:25}),r.createElement(ee.a,{rowClick:"edit"},r.createElement(ae.a,{source:"form_id"}),r.createElement(ae.a,{source:"description"}),r.createElement(he.a,{source:"imports_techies"})))},we=function(e){return r.createElement(ce.a,e,r.createElement(me.a,null,r.createElement(X.a,{source:"form_id"}),r.createElement(Y.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(X.a,{source:"description"}),r.createElement(_e.a,{source:"imports_techies"}),r.createElement(be.a,{source:"webhook_installed_at",showTime:!0})))},ve=function(e){return r.createElement(se.a,e,r.createElement(me.a,null,r.createElement(X.a,{source:"form_id"}),r.createElement(Y.a,{source:"semester",choices:[{id:"S_2020_01",name:"2020-01"},{id:"S_2020_02",name:"2020-02"}]}),r.createElement(X.a,{source:"description"}),r.createElement(_e.a,{source:"imports_techies"}),r.createElement(be.a,{source:"webhook_installed_at"})))},Se=a(1019),ke=a(1007),Oe=a(242),ye=a(983),je=a(915),Ae=a(1005),Re=a(1006),De=a(456),Le=a.n(De),Te=function(e){var t=e.record,a=void 0===t?{}:t;return r.createElement(ye.a,null,Object.entries(a.answers).map((function(e){var t=Object(Oe.a)(e,2),a=t[0],n=t[1];return r.createElement(je.a,{key:a},r.createElement(Ae.a,null,r.createElement(Le.a,null)),r.createElement(Re.a,{primary:a,secondary:r.createElement("span",null,n.value)}))})))};Te.defaultProps={addLabel:!0};var Ie=a(457),Ce=a.n(Ie),Ne=function(e){var t=e.source,a=e.record,n=void 0===a?{}:a;return r.createElement(Ce.a,{src:n[t],collapsed:2,collapseStringsAfterLength:60})};Ne.defaultProps={addLabel:!0};var Fe=a(458),xe=a.n(Fe),Je=function(e){var t=e.source,a=e.record,n=void 0===a?{}:a;return r.createElement(xe.a,{fromNow:!0},n[t])};Je.defaultProps={addLabel:!0};var Me=function(e){return r.createElement(V.a,e,r.createElement(X.a,{label:"Search by form_id",source:"form_id",alwaysOn:!0}),r.createElement(X.a,{source:"typeform_response_token"}))},Ue=function(e){return r.createElement(Z.a,Object.assign({},e,{filters:r.createElement(Me,null),perPage:25,sort:{field:"created_at",order:"DESC"}}),r.createElement(ee.a,{rowClick:"show"},r.createElement(ae.a,{source:"form.description"}),r.createElement(ae.a,{source:"techie.first_name"}),r.createElement(ae.a,{source:"techie.last_name"}),r.createElement(Je,{source:"created_at"})))},qe=function(e){return r.createElement(Se.a,e,r.createElement(ke.a,null,r.createElement(oe.a,{toolbar:null},r.createElement(ie.a,{label:"Answers"},r.createElement(be.a,{source:"created_at",showTime:!0}),r.createElement(Te,{label:"Answers"})),r.createElement(ie.a,{label:"Details"},r.createElement(ae.a,{source:"form_id"}),r.createElement(ae.a,{source:"techie_id"}),r.createElement(ae.a,{source:"typeform_response_token"}),r.createElement(Ne,{source:"answers"}),r.createElement(Ne,{source:"typeform_event"}),r.createElement(be.a,{source:"created_at",showTime:!0})))))},Be=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement(u.a,{dataProvider:N,authProvider:F,i18nProvider:q,loginPage:$,theme:Q},n.a.createElement(d.a,{name:"techies",list:de,edit:fe,create:pe,icon:f.a}),n.a.createElement(d.a,{name:"forms",list:Pe,edit:we,create:ve,icon:h.a}),n.a.createElement(d.a,{name:"form_submissions",list:Ue,show:qe,icon:b.a}))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[509,1,2]]]);
//# sourceMappingURL=main.de834247.chunk.js.map